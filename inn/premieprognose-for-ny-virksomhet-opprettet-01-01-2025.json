{
    "navn": "Rutinefil for premieprognose HBF Stat",
    "variabler": {
        "grunnlagsdataMappe": "grunnlagsdata_2025-01-16_15-36-19-39",
        "fraGrunnlagsdataMappe": "grunnlagsdata_2025-01-15_21-33-31-85",
        "kjøringsId": "34",
        "prognoseAar": "2025",
        "premieprognoseKonvertingsår": "2025",
        "reserveberegningGrunnlagsdataAktuarVersjon": "7",
        "fremskrivingsDato": "2026.01.01",
        "avtalelisteChecksum": "55570b2d5bad58ef98cc88eca77ba382",
        "administrasjonspremieForSisteBokføringsperiode": "202512",
        "bokføringsperioderEndringspremier": "202507,202505",
        "paPreBa01Versjon": "0.0.44",
        "paPreBa02Versjon": "0.0.14",
        "paResBa01Versjon": "1.2.217",
        "paFakBa05Versjon": "2.0.18",
        "paFakBa13Versjon": "1.0.13",
        "paFakBa14Versjon": "1.0.15",
        "paFakBa04Versjon": "3.0.26",
        "rettighet": "panda_veldig_forenkla_rettighet"
    },
    "operasjoner": [
        {
            "handling": "deploy_batch",
            "batcher": [
                {
                    "navn": "pa_pre_ba_02",
                    "versjon": "${paPreBa02Versjon}"
                },
                {
                    "navn": "pa_res_ba_01",
                    "versjon": "${paResBa01Versjon}"
                },
                {
                    "navn": "pa_pre_ba_01",
                    "versjon": "${paPreBa01Versjon}"
                },
                {
                    "navn": "pa_fak_ba_13",
                    "versjon": "${paFakBa13Versjon}"
                },
                {
                    "navn": "pa_fak_ba_05",
                    "versjon": "${paFakBa05Versjon}"
                },
                {
                    "navn": "pa_fak_ba_14",
                    "versjon": "${paFakBa14Versjon}"
                },
                {
                    "navn": "pa_fak_ba_04",
                    "versjon": "${paFakBa04Versjon}"
                }
            ]
        },
        {
            "navn": "pa_pre_ba_02 (status startet)",
            "handling": "gruppe",
            "gruppeAv": [
                {
                    "handling": "rydd_grunnlagsdata_for_batch",
                    "batch": "pa_pre_ba_02"
                },
                {
                    "handling": "pa_pre_ba_02",
                    "modus": "premieprognose_kjoering_startet",
                    "kjøringsId": "${kjøringsId}"
                }
            ]
        },
        {
            "navn": "Rydding av innmappper for alle batcher",
            "handling": "gruppe",
            "gruppeAv": [
                {
                    "handling": "rydd_grunnlagsdata_for_batch",
                    "batch": "pa_res_ba_01"
                },
                {
                    "handling": "rydd_grunnlagsdata_for_batch",
                    "batch": "pa_pre_ba_01"
                },
                {
                    "handling": "rydd_grunnlagsdata_for_batch",
                    "batch": "pa_fak_ba_13"
                },
                {
                    "handling": "rydd_grunnlagsdata_for_batch",
                    "batch": "pa_fak_ba_05"
                },
                {
                    "handling": "rydd_grunnlagsdata_for_batch",
                    "batch": "pa_fak_ba_14"
                },
                {
                    "handling": "rydd_grunnlagsdata_for_batch",
                    "batch": "pa_fak_ba_04"
                }
            ]
        },
        {
            "navn": "manipuler prognosedata",
            "handling": "gruppe",
            "gruppeAv": [
                {
                    "handling": "kopier_grunnlagsdata_fra_arkiv_til_batch",
                    "fraGrunnlagsdataMappe": "${fraGrunnlagsdataMappe}",
                    "tilGrunnlagsdataMappe": "${grunnlagsdataMappe}",
                    "fraBatch": "pa_res_ba_02",
                    "tilBatch": "pa_pre_ba_01"
                },
                {
                    "handling": "kopier_filer_fra_aktuar_til_batch",
                    "premiemodell": "premieprognose",
                    "periode": "${avtalelisteChecksum}",
                    "prognoseVersjon": "avtaleliste",
                    "batch": "pa_pre_ba_01"
                },
                {
                    "handling": "pa_pre_ba_01",
                    "manipulatorer": [
                        {
                            "navn": "tilbakestill_medlemsdata",
                            "fraOgMed": "2025.01.01"
                        },
                        {
                            "navn": "tilbakestill_grunnbeløp",
                            "år": 2025
                        },
                        {
                            "navn": "tilbakestill_lønnstrinn_spk",
                            "år": 2025
                        },
                        {
                            "navn": "filtrer_aktiv_medlemsbestand",
                            "fraFil": "avtaleliste_hbf_stat.csv",
                            "aktivPåDato": "2025.01.01"
                        },
                        {
                            "navn": "lønnsvekst_medlemsdata",
                            "utviklingProsent": "4.5",
                            "fraOgMed": "2025.07.01"
                        },
                        {
                            "navn": "lønnsvekst_lønnstrinn_spk",
                            "utviklingProsent": "4.5",
                            "fraOgMed": "2025.07.01"
                        },
                        {
                            "navn": "reguler_grunnbeløp",
                            "utviklingProsent": "4.5",
                            "fraOgMed": "2025.05.01"
                        },
                        {
                            "navn": "forskyv_årskull",
                            "forskyvning": 0
                        }
                    ]
                },
                {
                    "handling": "kopier_filer_fra_pa_pre_ba_01_til_pa_res_ba_01",
                    "grunnlagsdataMappe": "${grunnlagsdataMappe}"
                }
            ]
        },
        {
            "navn": "pa_res_ba_01 produser kontoføringer og administrasjonspremieunderlag",
            "handling": "gruppe",
            "gruppeAv": [
                {
                    "handling": "kopier_arkivert_grunnlagsdata_fra_aktuar_til_pa_res_ba_01",
                    "versjon": "${reserveberegningGrunnlagsdataAktuarVersjon}",
                    "tilGrunnlagsdataMappe": "${grunnlagsdataMappe}"
                },
                {
                    "navn": "panda_reserveberegning",
                    "handling": "gruppe",
                    "gruppeAv": [
                        {
                            "handling": "pa_res_ba_01",
                            "modus": "panda_reserveberegning",
                            "sisteFremskrivingsdato": "${fremskrivingsDato}",
                            "grunnlagsdataMappe": "${grunnlagsdataMappe}",
                            "rettighet": "panda_veldig_forenkla_rettighet",
                            "premieprognose": {
                                "konverteringsår": "${premieprognoseKonvertingsår}",
                                "fremskrivingsfrekvens": "År"
                            }
                        },
                        {
                            "handling": "kopier_filer_fra_batch_til_batch",
                            "fraBatch": "pa_res_ba_01",
                            "tilBatch": "pa_fak_ba_13",
                            "grunnlagsdataMappe": "${grunnlagsdataMappe}"
                        }
                    ]
                },
                {
                    "navn": "panda_administrasjonspremieunderlag",
                    "handling": "gruppe",
                    "gruppeAv": [
                        {
                            "handling": "pa_res_ba_01",
                            "modus": "panda_administrasjonspremieunderlag",
                            "sisteFremskrivingsdato": "${fremskrivingsDato}",
                            "grunnlagsdataMappe": "${grunnlagsdataMappe}",
                            "rettighet": "panda_veldig_forenkla_rettighet"
                        },
                        {
                            "handling": "kopier_filer_fra_batch_til_batch",
                            "filPrefix": "administrasjonspremieunderlag",
                            "fraBatch": "pa_res_ba_01",
                            "tilBatch": "pa_fak_ba_05",
                            "grunnlagsdataMappe": "${grunnlagsdataMappe}"
                        },
                        {
                            "handling": "kopier_filer_fra_batch_til_batch",
                            "filPrefix": "administrasjonspremieunderlag",
                            "fraBatch": "pa_res_ba_01",
                            "tilBatch": "pa_pre_ba_02",
                            "grunnlagsdataMappe": "${grunnlagsdataMappe}"
                        },
                        {
                            "handling": "rydd_grunnlagsdata_for_batch",
                            "batch": "pa_res_ba_01"
                        }
                    ]
                }
            ]
        },
        {
            "navn": "pa_fak_ba_05 filtrer administrasjonspremieunderlag",
            "handling": "gruppe",
            "gruppeAv": [
                {
                    "handling": "kopier_filer_fra_aktuar_til_batch",
                    "premiemodell": "premieprognose",
                    "periode": "${avtalelisteChecksum}",
                    "prognoseVersjon": "avtaleliste",
                    "batch": "pa_fak_ba_05",
                    "grunnlagsdataMappe": "${grunnlagsdataMappe}"
                },
                {
                    "handling": "pa_fak_ba_05",
                    "modus": "filtrer_administrasjonspremieunderlag",
                    "grunnlagsdataMappe": "${grunnlagsdataMappe}",
                    "validerFeilendeMedlemmer": true
                },
                {
                    "handling": "rydd_grunnlagsdata_for_batch",
                    "batch": "pa_fak_ba_05"
                },
                {
                    "handling": "kopier_filer_fra_batch_til_batch",
                    "filPrefix": "administrasjonspremieunderlag",
                    "fraBatch": "pa_fak_ba_05",
                    "tilBatch": "pa_fak_ba_05",
                    "grunnlagsdataMappe": "${grunnlagsdataMappe}"
                }
            ]
        },
        {
            "navn": "pa_fak_ba_05 generere administrasjonspremier",
            "handling": "gruppe",
            "gruppeAv": [
                {
                    "handling": "pa_fak_ba_05",
                    "modus": "generer_administrasjonspremier",
                    "grunnlagsdataMappe": "${grunnlagsdataMappe}",
                    "bokføringsperiode": "${administrasjonspremieForSisteBokføringsperiode}",
                    "validerFeilendeMedlemmer": true
                },
                {
                    "handling": "kopier_filer_fra_batch_til_batch",
                    "filPrefix": "administrasjonspremie",
                    "fraBatch": "pa_fak_ba_05",
                    "tilBatch": "pa_fak_ba_04",
                    "grunnlagsdataMappe": "${grunnlagsdataMappe}"
                },
                {
                    "handling": "rydd_grunnlagsdata_for_batch",
                    "batch": "pa_fak_ba_05"
                }
            ]
        },
        {
            "navn": "pa_fak_ba_13 generere fakturerbare premiedifferanser fra kontoføringer",
            "handling": "gruppe",
            "gruppeAv": [
                {
                    "handling": "pa_fak_ba_13",
                    "modus": "generer_premiedifferanser_for_premieprognoser",
                    "grunnlagsdataMappe": "${grunnlagsdataMappe}",
                    "validerFeilendeMedlemmer": true,
                    "bokføringsperioder": "${bokføringsperioderEndringspremier}"
                },
                {
                    "handling": "kopier_filer_fra_batch_til_batch",
                    "filPrefix": "fakturerbare_premiedifferanser",
                    "fraBatch": "pa_fak_ba_13",
                    "tilBatch": "pa_fak_ba_14",
                    "grunnlagsdataMappe": "${grunnlagsdataMappe}"
                },
                {
                    "handling": "rydd_grunnlagsdata_for_batch",
                    "batch": "pa_fak_ba_13"
                }
            ]
        },
        {
            "navn": "pa_fak_ba_14 generere reservetransaksjonsdifferanser for hbf-stat",
            "handling": "gruppe",
            "gruppeAv": [
                {
                    "handling": "kopier_filer_fra_aktuar_til_batch",
                    "premiemodell": "premieprognose",
                    "periode": "${avtalelisteChecksum}",
                    "prognoseVersjon": "avtaleliste",
                    "batch": "pa_fak_ba_14",
                    "grunnlagsdataMappe": "${grunnlagsdataMappe}"
                },
                {
                    "handling": "pa_fak_ba_14",
                    "modus": "premiefiltrering_for_hbf_stat",
                    "grupperMedDekning": "true",
                    "grunnlagsdataMappe": "${grunnlagsdataMappe}",
                    "validerFeilendeMedlemmer": true
                },
                {
                    "handling": "kopier_filer_fra_batch_til_batch",
                    "filPrefix": "reservetransaksjonsdifferanser_medlem",
                    "fraBatch": "pa_fak_ba_14",
                    "tilBatch": "pa_fak_ba_04",
                    "grunnlagsdataMappe": "${grunnlagsdataMappe}"
                },
                {
                    "handling": "kopier_filer_fra_batch_til_batch",
                    "filPrefix": "reservetransaksjonsdifferanser_medlem",
                    "fraBatch": "pa_fak_ba_14",
                    "tilBatch": "pa_pre_ba_02",
                    "grunnlagsdataMappe": "${grunnlagsdataMappe}"
                },
                {
                    "handling": "rydd_grunnlagsdata_for_batch",
                    "batch": "pa_fak_ba_14"
                }
            ]
        },
        {
            "navn": "pa_fak_ba_04 premieprognoser for HBF Stat",
            "handling": "gruppe",
            "gruppeAv": [
                {
                    "handling": "pa_fak_ba_04",
                    "modus": "premieprognoser",
                    "grunnlagsdataMappe": "${grunnlagsdataMappe}",
                    "prognoseAar": "${prognoseAar}",
                    "premiemodell": "HBF_STAT",
                    "validerFeilendeMedlemmer": true
                },
                {
                    "handling": "kopier_filer_fra_batch_til_batch",
                    "filPrefix": "premieprognoser",
                    "fraBatch": "pa_fak_ba_04",
                    "tilBatch": "pa_pre_ba_02",
                    "grunnlagsdataMappe": "${grunnlagsdataMappe}"
                },
                {
                    "handling": "rydd_grunnlagsdata_for_batch",
                    "batch": "pa_fak_ba_14"
                }
            ]
        },
        {
            "navn": "pa_pre_ba_02 last opp data for premieprognoser",
            "handling": "gruppe",
            "gruppeAv": [
                {
                    "handling": "kopier_filer_fra_aktuar_til_batch",
                    "premiemodell": "premieprognose",
                    "periode": "${avtalelisteChecksum}",
                    "prognoseVersjon": "avtaleliste",
                    "batch": "pa_pre_ba_02",
                    "grunnlagsdataMappe": "${grunnlagsdataMappe}"
                },
                {
                    "handling": "pa_pre_ba_02",
                    "modus": "premieprognoser_avtale",
                    "kjøringsId": "${kjøringsId}",
                    "filnavn": "premieprognoser",
                    "grunnlagsdataMappe": "${grunnlagsdataMappe}"
                },
                {
                    "handling": "pa_pre_ba_02",
                    "modus": "premieprognoser_medlem",
                    "kjøringsId": "${kjøringsId}",
                    "filnavn": "reservetransaksjonsdifferanser_medlem",
                    "grunnlagsdataMappe": "${grunnlagsdataMappe}"
                },
                {
                    "handling": "pa_pre_ba_02",
                    "modus": "premieprognoser_avtaleliste",
                    "kjøringsId": "${kjøringsId}",
                    "filnavn": "avtaleliste_hbf_stat",
                    "grunnlagsdataMappe": "${grunnlagsdataMappe}"
                },
                {
                    "handling": "pa_pre_ba_02",
                    "modus": "administrasjonspremieunderlag",
                    "kjøringsId": "${kjøringsId}",
                    "filnavn": "administrasjonspremieunderlag",
                    "grunnlagsdataMappe": "${grunnlagsdataMappe}"
                },
                {
                    "handling": "rydd_grunnlagsdata_for_batch",
                    "batch": "pa_pre_ba_02"
                }
            ]
        },
        {
            "navn": "pa_pre_ba_02 (status ferdig)",
            "handling": "gruppe",
            "gruppeAv": [
                {
                    "handling": "rydd_grunnlagsdata_for_batch",
                    "batch": "pa_pre_ba_02"
                },
                {
                    "handling": "pa_pre_ba_02",
                    "modus": "premieprognose_kjoering_ferdig",
                    "kjøringsId": "${kjøringsId}"
                }
            ]
        }
    ]
}