{
  "navn": "Rutine for kjøring av pa_ork_ba_01 for HBF_FLS prognose",
  "variabler": {
    "grunnlagsdataMappe" : "grunnlagsdata_<yyyy-MM-dd_HH-mm-ss-SS>",
    "termin" : "<termin>",
    "førstePeriode" : "<førstePeriode>",
    "andrePeriode" : "<andrePeriode>",
    "prognoseVersjon" : "<prognoseVersjon>"
  },
  "operasjoner": [
    {
      "handling": "opprettArbeidsMappe",
      "arbeidsMappeId": "${grunnlagsdataMappe}",
      "underMappe": ""
    },

    {
      "handling": "opprettLocalInnMappeForBatch",
      "batch": "pa_fak_ba_06",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "kopierFilerFraAktuarTilBatch",
      "premiemodell": "hbf_fls",
      "periode": "${førstePeriode}",
      "prognoseVersjon": "${prognoseVersjon}",
      "batch": "pa_fak_ba_06",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "pa_fak_ba_06",
      "modus": "premiefellesskap_utjevning_prognose",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "opprettArbeidsMappe",
      "arbeidsMappeId": "${grunnlagsdataMappe}",
      "underMappe": "pa_fak_ba_06/${førstePeriode}"
    },
    {
      "handling": "kopierBatchOutputTilArbeidsMappe",
      "filnavn": "prognosepremieuttrekk",
      "batch": "pa_fak_ba_06",
      "arbeidsMappeId": "${grunnlagsdataMappe}",
      "underMappe": "${førstePeriode}"
    },

    {
      "handling": "kopierFilerFraAktuarTilBatch",
      "premiemodell": "hbf_fls",
      "periode": "${andrePeriode}",
      "prognoseVersjon": "${prognoseVersjon}",
      "batch": "pa_fak_ba_06",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "pa_fak_ba_06",
      "modus": "premiefellesskap_utjevning_prognose",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "opprettArbeidsMappe",
      "arbeidsMappeId": "${grunnlagsdataMappe}",
      "underMappe": "pa_fak_ba_06/${andrePeriode}"
    },
    {
      "handling": "kopierBatchOutputTilArbeidsMappe",
      "filnavn": "prognosepremieuttrekk",
      "batch": "pa_fak_ba_06",
      "arbeidsMappeId": "${grunnlagsdataMappe}",
      "underMappe": "${andrePeriode}"
    },


    {
      "handling": "opprettLocalInnMappeForBatch",
      "batch": "pa_fak_ba_04",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "konkatinerOgKopierFraArbeidsMappeTilBatch",
      "filnavn": "prognosepremieuttrekk",
      "batch": "pa_fak_ba_04",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "arbeidsMappeId": "${grunnlagsdataMappe}",
      "underMappe": "pa_fak_ba_06"
    },
    {
      "handling": "lastNedReferanseDataForBatch",
      "filnavn": "termininfo",
      "batch": "pa_fak_ba_04",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },

    {
      "handling": "pa_fak_ba_04",
      "modus": "generer_fakturaunderlag_for_utjevnet_prognose_fra_avtale",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "termin": "${termin}",
      "premiemodell": "HBF_FLS"
    },
    {
      "handling": "arkiverBatchOutput",
      "filnavn": "fakturaunderlag",
      "batch": "pa_fak_ba_04",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "nøkkel": "hbf_fls_prognose/${termin}"
    },
    {
      "handling": "pa_fak_ba_04",
      "modus": "generer_agressofil_for_hbf_fls_prognose",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "termin": "${termin}",
      "premiemodell": "HBF_FLS"
    },
    {
      "handling": "arkiverBatchOutput",
      "filnavn": "agressofil_hbf_fls_prognose",
      "batch": "pa_fak_ba_04",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "nøkkel": "hbf_fls_prognose/${termin}",
      "filter": "Agressofil"
    },


    {
      "handling": "opprettLocalInnMappeForBatch",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "konkatinerOgKopierFraArbeidsMappeTilBatch",
      "filnavn": "prognosepremieuttrekk",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "arbeidsMappeId": "${grunnlagsdataMappe}",
      "underMappe": "pa_fak_ba_06"
    },
    {
      "handling": "lastNedReferanseDataForBatch",
      "filnavn": "termininfo",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "genererMetadataFilFraAktuarFilTilBatch",
      "aktuarFil": "noekkelunderlag_prognosepremier",
      "generertFil": "prognose_metadata",
      "premiemodell": "hbf_fls",
      "periode": "${førstePeriode}",
      "prognoseVersjon": "${prognoseVersjon}",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "typeindikator": "PROGNOSE_METADATA",
      "felter": ["5"]
    },

    {
      "handling": "pa_fak_ba_09",
      "modus": "utjevnet_premier_rapport_avtale",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "sendBatchOutputTilDVH",
      "filPrefix": "utjevnet_premier_rapport_avtale",
      "filListe": "HBFFLS_FILLISTE_AVTALE.txt",
      "batch": "pa_fak_ba_09",
      "filstiHosDVH": "/hbf_fls/prognosefakturering/avtale"
    },
    {
      "handling": "arkiverBatchOutput",
      "filnavn": "utjevnet_premier_rapport_avtale",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "nøkkel": "hbf_fls_prognose/${termin}"
    },

    {
      "handling": "pa_fak_ba_09",
      "modus": "utjevnet_premier_rapport_medlem",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "sendBatchOutputTilDVH",
      "filPrefix": "utjevnet_premier_rapport_medlem",
      "filListe": "HBFFLS_FILLISTE_MEDLEM.txt",
      "batch": "pa_fak_ba_09",
      "filstiHosDVH": "/hbf_fls/prognosefakturering/medlem"
    },
    {
      "handling": "arkiverBatchOutput",
      "filnavn": "utjevnet_premier_rapport_medlem",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "nøkkel": "hbf_fls_prognose/${termin}"
    },

    {
      "handling": "ryddArbeidsMappe",
      "arbeidsMappeId": "${grunnlagsdataMappe}"
    }
  ]
}