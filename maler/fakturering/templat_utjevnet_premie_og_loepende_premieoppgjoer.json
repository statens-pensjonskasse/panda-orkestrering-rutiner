{
  "navn": "Rutine for kjøring av pa_ork_ba_01 for utjevnet prognosepremie 202201 og 202202 og løpende premieoppgjør 202201",
  "gyldigVersjon": "0.0.46",
  "variabler": {
    "prognoseVersjon": "<prognoseVersjon>",
    "år" : "2022",
    "grunnlagsdataMappe": "#{grunnlagsdatamappeNå}",

    "fordelingsnøkkelPeriode": "202201",

    "bokføringsperiode01": "202201",
    "bokføringsperiode02": "202202",

    "fremskrivingsDato02": "2022.02.01"
  },
  "operasjoner": [
    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_06",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "kopier_filer_fra_aktuar_til_batch",
      "premiemodell": "hbf_fls",
      "periode": "${bokføringsperiode01}",
      "prognoseVersjon": "${prognoseVersjon}",
      "batch": "pa_fak_ba_06",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "kopier_fra_arkiv_til_batch",
      "filnavn": "noekkelunderlag_faktiske_premier",
      "batchFra": "pa_fak_ba_08",
      "batchTil": "pa_fak_ba_06",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "generer_noekkelunderlag/${fordelingsnøkkelPeriode}"
    },
    {
      "handling": "konkatiner_og_kopier_fra_arkiv_til_batch",
      "filnavn": "aggregerte_noekler_faktiske_premier",
      "batchFra": "pa_fak_ba_08",
      "batchTil": "pa_fak_ba_06",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "aggreger_faktiske_premier/${fordelingsnøkkelPeriode}"
    },
    {
      "handling": "pa_fak_ba_06",
      "modus": "premiefellesskap_utjevning_aggregert_prognosepremie",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "validerFeilendeMedlemmer": true
    },
    {
      "handling": "arkiver_batch_output",
      "filnavn": "prognosepremieuttrekk",
      "batch": "pa_fak_ba_06",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "nøkkel": "premiefellesskap_utjevning_aggregert_prognosepremie/${bokføringsperiode01}"
    },





    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_06",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "kopier_filer_fra_aktuar_til_batch",
      "premiemodell": "hbf_fls",
      "periode": "${bokføringsperiode02}",
      "prognoseVersjon": "${prognoseVersjon}",
      "batch": "pa_fak_ba_06",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "kopier_fra_arkiv_til_batch",
      "filnavn": "noekkelunderlag_faktiske_premier",
      "batchFra": "pa_fak_ba_08",
      "batchTil": "pa_fak_ba_06",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "generer_noekkelunderlag/${fordelingsnøkkelPeriode}"
    },
    {
      "handling": "konkatiner_og_kopier_fra_arkiv_til_batch",
      "filnavn": "aggregerte_noekler_faktiske_premier",
      "batchFra": "pa_fak_ba_08",
      "batchTil": "pa_fak_ba_06",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "aggreger_faktiske_premier/${fordelingsnøkkelPeriode}"
    },
    {
      "handling": "pa_fak_ba_06",
      "modus": "premiefellesskap_utjevning_aggregert_prognosepremie",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "validerFeilendeMedlemmer": true
    },
    {
      "handling": "arkiver_batch_output",
      "filnavn": "prognosepremieuttrekk",
      "batch": "pa_fak_ba_06",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "nøkkel": "premiefellesskap_utjevning_aggregert_prognosepremie/${bokføringsperiode02}"
    },





    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_06",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "kopier_filer_fra_aktuar_til_batch",
      "premiemodell": "hbf_fls",
      "periode": "${år}",
      "prognoseVersjon": "${prognoseVersjon}",
      "batch": "pa_fak_ba_06",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "kopier_fra_arkiv_til_batch",
      "filnavn": "noekkelunderlag_faktiske_premier",
      "batchFra": "pa_fak_ba_08",
      "batchTil": "pa_fak_ba_06",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "generer_noekkelunderlag/${fordelingsnøkkelPeriode}"
    },
    {
      "handling": "konkatiner_og_kopier_fra_arkiv_til_batch",
      "filnavn": "aggregerte_noekler_faktiske_premier",
      "batchFra": "pa_fak_ba_08",
      "batchTil": "pa_fak_ba_06",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "aggreger_faktiske_premier/${fordelingsnøkkelPeriode}"
    },
    {
      "handling": "pa_fak_ba_06",
      "modus": "premiefellesskap_utjevning_aggregert_prognosepremie_varsling",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "validerFeilendeMedlemmer": true
    },
    {
      "handling": "arkiver_batch_output",
      "filnavn": "aars_prognosepremieuttrekk",
      "batch": "pa_fak_ba_06",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "nøkkel": "premiefellesskap_utjevning_aggregert_prognosepremie_varsling/${år}"
    },
    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_06",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },





    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_07",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "konkatiner_og_kopier_fra_arkiv_til_batch",
      "filnavn": "utjevnet_faktisk_premie",
      "batchFra": "pa_fak_ba_06",
      "batchTil": "pa_fak_ba_07",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "premiefellesskap_utjevning_faktisk_premie/${bokføringsperiode01}"
    },
    {
      "handling": "konkatiner_og_kopier_fra_arkiv_til_batch_og_konverter_fnr",
      "filnavn": "prognosepremieuttrekk",
      "batchFra": "pa_fak_ba_06",
      "batchTil": "pa_fak_ba_07",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "premiefellesskap_utjevning_aggregert_prognosepremie/${bokføringsperiode01}"
    },
    {
      "handling": "pa_fak_ba_07",
      "modus": "beregn_lopende_premieoppgjoer",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "validerFeilendeMedlemmer": true
    },
    {
      "handling": "arkiver_batch_output",
      "filnavn": "lopende_premieoppgjoer",
      "batch": "pa_fak_ba_07",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "nøkkel": "beregn_lopende_premieoppgjoer/${bokføringsperiode01}"
    },
    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_07",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },





    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "konkatiner_og_kopier_fra_arkiv_til_batch",
      "filnavn": "lopende_premieoppgjoer",
      "batchFra": "pa_fak_ba_07",
      "batchTil": "pa_fak_ba_09",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "beregn_lopende_premieoppgjoer/${bokføringsperiode01}"
    },
    {
      "handling": "konkatiner_og_kopier_fra_arkiv_til_batch",
      "filnavn": "utjevnet_faktisk_premie",
      "batchFra": "pa_fak_ba_06",
      "batchTil": "pa_fak_ba_09",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "premiefellesskap_utjevning_faktisk_premie/${bokføringsperiode01}"
    },
    {
      "handling": "konkatiner_og_kopier_fra_arkiv_til_batch_og_konverter_fnr",
      "filnavn": "prognosepremieuttrekk",
      "batchFra": "pa_fak_ba_06",
      "batchTil": "pa_fak_ba_09",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "premiefellesskap_utjevning_aggregert_prognosepremie/${bokføringsperiode01}"
    },
    {
      "handling": "konkatiner_og_kopier_fra_arkiv_til_batch",
      "filnavn": "totalreserver",
      "batchFra": "pa_fak_ba_02",
      "batchTil": "pa_fak_ba_09",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "reserveaggregering_for_medlem/${fremskrivingsDato02}"
    },
    {
      "handling": "konkatiner_og_kopier_fra_arkiv_til_batch",
      "filnavn": "administrasjonspremieunderlag",
      "batchFra": "pa_res_ba_01",
      "batchTil": "pa_fak_ba_09",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "panda_administrasjonspremieunderlag/${fremskrivingsDato02}"
    },
    {
      "handling": "pa_fak_ba_09",
      "modus": "loepende_premieoppgjoer_dataunderlag",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "kjøringsId": "#{genererUUID}",
      "validerFeilendeMedlemmer": true
    },
    {
      "handling": "arkiver_batch_output",
      "filnavn": "loepende_premieoppgjoer_dataunderlag",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "nøkkel": "loepende_premieoppgjoer_dataunderlag/${bokføringsperiode01}"
    },
    {
      "handling": "send_batch_output_til_dvh",
      "filPrefix": "loepende_premieoppgjoer_dataunderlag",
      "filListe": "HBFFLS_FILLISTE_MEDLEM.txt",
      "batch": "pa_fak_ba_09",
      "filstiHosDVH": "/hbf_fls/lopende_premieoppgjoer/medlem"
    },
    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    }
  ]
}