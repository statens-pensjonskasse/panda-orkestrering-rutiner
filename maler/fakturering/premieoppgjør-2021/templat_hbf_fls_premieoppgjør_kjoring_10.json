{
  "navn": "Rutine for kjøring av pa_ork_ba_01 for reserveoppbygging dataunerlag periode 202108 og 202109",
  "gyldigVersjon": "0.0.9",
  "variabler": {
    "grunnlagsdataMappe" : "#{grunnlagsdatamappeNå}",

    "fremskrivingsDato08": "2021.08.01",
    "bokføringsperiode08": "202108",

    "fremskrivingsDato09": "2021.09.01",
    "uttrekksdato09": "<uttrekksdato09>",
    "bokføringsperiode09": "202109",

    "fremskrivingsDato10": "2021.10.01",
    "uttrekksdato10": "<uttrekksdato10>"
  },
  "operasjoner": [
    {
      "handling": "rydd_filområde_hos_dvh",
      "filstiHosDVH": "/kontofoering"
    },
    {
      "handling": "rydd_filområde_hos_dvh",
      "filstiHosDVH": "/reserveoppbygging"
    },






    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "kopier_fra_arkiv_til_batch",
      "filnavn": "flettede_kontofoeringer",
      "batchFra": "pa_fak_ba_11",
      "batchTil": "pa_fak_ba_09",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "flette_feilende_medlemmer/${fremskrivingsDato09}"
    },
    {
      "handling": "pa_fak_ba_09",
      "modus": "generer_kontofoeringunderlag",
      "kjøringsId": "#{genererUUID}",
      "uttrekksdato": "${uttrekksdato09}",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "validerFeilendeMedlemmer": true
    },
    {
      "handling": "arkiver_batch_output",
      "filnavn": "kontofoeringunderlag",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "nøkkel": "generer_kontofoeringunderlag/${fremskrivingsDato09}",
      "komprimerOutput": true
    },
    {
      "handling": "send_batch_output_til_dvh",
      "filPrefix": "kontofoeringunderlag",
      "filListe": "KONTOFOERING_FILLISTE.txt",
      "batch": "pa_fak_ba_09",
      "filstiHosDVH": "/kontofoering/${fremskrivingsDato09}",
      "encoding": "UTF_16LE"
    },


    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },





    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_03",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "konkatiner_og_kopier_fra_arkiv_til_batch",
      "filnavn": "flettede_kontofoeringer",
      "batchFra": "pa_fak_ba_11",
      "batchTil": "pa_fak_ba_03",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "flette_feilende_medlemmer/${fremskrivingsDato08}"
    },
    {
      "handling": "konkatiner_og_kopier_fra_arkiv_til_batch",
      "filnavn": "flettede_kontofoeringer",
      "batchFra": "pa_fak_ba_11",
      "batchTil": "pa_fak_ba_03",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "flette_feilende_medlemmer/${fremskrivingsDato09}"
    },
    {
      "handling": "pa_fak_ba_03",
      "modus": "reserveoppbygging",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "førsteKjøring": "${fremskrivingsDato08}",
      "andreKjøring": "${fremskrivingsDato09}",
      "bokføringsperiode": "${bokføringsperiode08}",
      "validerFeilendeMedlemmer": true
    },
    {
      "handling": "arkiver_batch_output",
      "filnavn": "reserveoppbygging",
      "batch": "pa_fak_ba_03",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "nøkkel": "reserveoppbygging/${bokføringsperiode08}",
      "komprimerOutput": true
    },
    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_03",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },


    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "kopier_fra_arkiv_til_batch",
      "filnavn": "reserveoppbygging",
      "batchFra": "pa_fak_ba_03",
      "batchTil": "pa_fak_ba_09",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "reserveoppbygging/${bokføringsperiode08}"
    },
    {
      "handling": "pa_fak_ba_09",
      "modus": "generer_reserveoppbygging_dataunderlag",
      "kjøringsId": "#{genererUUID}",
      "uttrekksdato": "${uttrekksdato09}",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "validerFeilendeMedlemmer": true
    },
    {
      "handling": "arkiver_batch_output",
      "filnavn": "reserveoppbygging_dataunderlag",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "nøkkel": "generer_reserveoppbygging_dataunderlag/${bokføringsperiode08}",
      "komprimerOutput": true
    },
    {
      "handling": "send_bare_filer_fra_batch_output_til_dvh",
      "filPrefix": "reserveoppbygging_dataunderlag",
      "batch": "pa_fak_ba_09",
      "filstiHosDVH": "/reserveoppbygging",
      "encoding": "UTF_16LE"
    },
    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },


    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_03",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "konkatiner_og_kopier_fra_arkiv_til_batch",
      "filnavn": "flettede_kontofoeringer",
      "batchFra": "pa_fak_ba_11",
      "batchTil": "pa_fak_ba_03",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "flette_feilende_medlemmer/${fremskrivingsDato09}"
    },
    {
      "handling": "konkatiner_og_kopier_fra_arkiv_til_batch",
      "filnavn": "flettede_kontofoeringer",
      "batchFra": "pa_fak_ba_11",
      "batchTil": "pa_fak_ba_03",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "flette_feilende_medlemmer/${fremskrivingsDato10}"
    },
    {
      "handling": "pa_fak_ba_03",
      "modus": "reserveoppbygging",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "førsteKjøring": "${fremskrivingsDato09}",
      "andreKjøring": "${fremskrivingsDato10}",
      "bokføringsperiode": "${bokføringsperiode09}",
      "validerFeilendeMedlemmer": true
    },
    {
      "handling": "arkiver_batch_output",
      "filnavn": "reserveoppbygging",
      "batch": "pa_fak_ba_03",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "nøkkel": "reserveoppbygging/${bokføringsperiode09}",
      "komprimerOutput": true
    },
    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_03",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },


    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "kopier_fra_arkiv_til_batch",
      "filnavn": "reserveoppbygging",
      "batchFra": "pa_fak_ba_03",
      "batchTil": "pa_fak_ba_09",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "reserveoppbygging/${bokføringsperiode09}"
    },
    {
      "handling": "pa_fak_ba_09",
      "modus": "generer_reserveoppbygging_dataunderlag",
      "kjøringsId": "#{genererUUID}",
      "uttrekksdato": "${uttrekksdato10}",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "validerFeilendeMedlemmer": true
    },
    {
      "handling": "arkiver_batch_output",
      "filnavn": "reserveoppbygging_dataunderlag",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "nøkkel": "generer_reserveoppbygging_dataunderlag/${bokføringsperiode09}",
      "komprimerOutput": true
    },
    {
      "handling": "send_bare_filer_fra_batch_output_til_dvh",
      "filPrefix": "reserveoppbygging_dataunderlag",
      "batch": "pa_fak_ba_09",
      "filstiHosDVH": "/reserveoppbygging",
      "encoding": "UTF_16LE"
    },
    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },

    {
      "handling": "opprett_filliste_og_triggerfil_hos_dvh",
      "filPrefix": "reserveoppbygging_dataunderlag",
      "filListe": "RESERVEOPPBYGGING_FILLISTE.txt",
      "filstiHosDVH": "/reserveoppbygging"
    },











    {
      "handling": "kopier_fra_arkiv_til_batch",
      "filnavn": "flettede_kontofoeringer",
      "batchFra": "pa_fak_ba_11",
      "batchTil": "pa_fak_ba_09",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "flette_feilende_medlemmer/${fremskrivingsDato10}"
    },
    {
      "handling": "pa_fak_ba_09",
      "modus": "generer_kontofoeringunderlag",
      "kjøringsId": "#{genererUUID}",
      "uttrekksdato": "${uttrekksdato10}",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "validerFeilendeMedlemmer": true
    },
    {
      "handling": "arkiver_batch_output",
      "filnavn": "kontofoeringunderlag",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "nøkkel": "generer_kontofoeringunderlag/${fremskrivingsDato10}",
      "komprimerOutput": true
    },
    {
      "handling": "send_batch_output_til_dvh",
      "filPrefix": "kontofoeringunderlag",
      "filListe": "KONTOFOERING_FILLISTE.txt",
      "batch": "pa_fak_ba_09",
      "filstiHosDVH": "/kontofoering/${fremskrivingsDato10}",
      "encoding": "UTF_16LE"
    },
    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    }
  ]
}
