{
  "navn": "Rutine for kjøring av pa_ork_ba_01 for reserveoppbygging dataunerlag periode 202110 og 202111",
  "gyldigVersjon": "0.0.9",
  "variabler": {

    "fremskrivingsDato10": "2021.10.01",
    "bokføringsperiode10": "202110",

    "fremskrivingsDato11": "2021.11.01",
    "uttrekksdato09": "<uttrekksdato10>",
    "bokføringsperiode11": "202111",

    "fremskrivingsDato12": "2021.12.01",
    "uttrekksdato09": "<uttrekksdato11>"
  },
  "operasjoner": [
    {
      "handling": "rydd_filområde_hos_dvh",
      "filstiHosDVH": "/kontofoering"
    },
    {
      "handling": "rydd_filområde_hos_dvh",
      "filstiHosDVH": "/reserveoppbygging"
    },





    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "kopier_fra_arkiv_til_batch",
      "filnavn": "flettede_kontofoeringer",
      "batchFra": "pa_fak_ba_11",
      "batchTil": "pa_fak_ba_09",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "flette_feilende_medlemmer/${fremskrivingsDato11}"
    },
    {
      "handling": "pa_fak_ba_09",
      "modus": "generer_kontofoeringunderlag",
      "kjøringsId": "#{genererUUID}",
      "uttrekksdato": "${uttrekksdato11}",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "validerFeilendeMedlemmer": true
    },
    {
      "handling": "arkiver_batch_output",
      "filnavn": "kontofoeringunderlag",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "nøkkel": "generer_kontofoeringunderlag/${fremskrivingsDato11}",
      "komprimerOutput": true
    },
    {
      "handling": "send_batch_output_til_dvh",
      "filPrefix": "kontofoeringunderlag",
      "filListe": "KONTOFOERING_FILLISTE.txt",
      "batch": "pa_fak_ba_09",
      "filstiHosDVH": "/kontofoering/${fremskrivingsDato11}",
      "encoding": "UTF_16LE"
    },
    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },



    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_03",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "konkatiner_og_kopier_fra_arkiv_til_batch",
      "filnavn": "flettede_kontofoeringer",
      "batchFra": "pa_fak_ba_11",
      "batchTil": "pa_fak_ba_03",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "flette_feilende_medlemmer/${fremskrivingsDato10}"
    },
    {
      "handling": "konkatiner_og_kopier_fra_arkiv_til_batch",
      "filnavn": "flettede_kontofoeringer",
      "batchFra": "pa_fak_ba_11",
      "batchTil": "pa_fak_ba_03",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "flette_feilende_medlemmer/${fremskrivingsDato11}"
    },
    {
      "handling": "pa_fak_ba_03",
      "modus": "reserveoppbygging",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "førsteKjøring": "${fremskrivingsDato10}",
      "andreKjøring": "${fremskrivingsDato11}",
      "bokføringsperiode": "${bokføringsperiode10}",
      "validerFeilendeMedlemmer": true
    },
    {
      "handling": "arkiver_batch_output",
      "filnavn": "reserveoppbygging",
      "batch": "pa_fak_ba_03",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "nøkkel": "reserveoppbygging/${bokføringsperiode10}",
      "komprimerOutput": true
    },
    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_03",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },


    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "kopier_fra_arkiv_til_batch",
      "filnavn": "reserveoppbygging",
      "batchFra": "pa_fak_ba_03",
      "batchTil": "pa_fak_ba_09",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "reserveoppbygging/${bokføringsperiode10}"
    },
    {
      "handling": "pa_fak_ba_09",
      "modus": "generer_reserveoppbygging_dataunderlag",
      "kjøringsId": "#{genererUUID}",
      "uttrekksdato": "${uttrekksdato11}",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "validerFeilendeMedlemmer": true
    },
    {
      "handling": "arkiver_batch_output",
      "filnavn": "reserveoppbygging_dataunderlag",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "nøkkel": "generer_reserveoppbygging_dataunderlag/${bokføringsperiode10}",
      "komprimerOutput": true
    },
    {
      "handling": "send_bare_filer_fra_batch_output_til_dvh",
      "filPrefix": "reserveoppbygging_dataunderlag",
      "batch": "pa_fak_ba_09",
      "filstiHosDVH": "/reserveoppbygging"
    },
















    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "kopier_fra_arkiv_til_batch",
      "filnavn": "flettede_kontofoeringer",
      "batchFra": "pa_fak_ba_11",
      "batchTil": "pa_fak_ba_09",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "flette_feilende_medlemmer/${fremskrivingsDato12}"
    },
    {
      "handling": "pa_fak_ba_09",
      "modus": "generer_kontofoeringunderlag",
      "kjøringsId": "#{genererUUID}",
      "uttrekksdato": "${uttrekksdato12}",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "validerFeilendeMedlemmer": true
    },
    {
      "handling": "arkiver_batch_output",
      "filnavn": "kontofoeringunderlag",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "nøkkel": "generer_kontofoeringunderlag/${fremskrivingsDato12}",
      "komprimerOutput": true
    },
    {
      "handling": "send_batch_output_til_dvh",
      "filPrefix": "kontofoeringunderlag",
      "filListe": "KONTOFOERING_FILLISTE.txt",
      "batch": "pa_fak_ba_09",
      "filstiHosDVH": "/kontofoering/${fremskrivingsDato12}",
      "encoding": "UTF_16LE"
    },
    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },


    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_03",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "konkatiner_og_kopier_fra_arkiv_til_batch",
      "filnavn": "flettede_kontofoeringer",
      "batchFra": "pa_fak_ba_11",
      "batchTil": "pa_fak_ba_03",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "flette_feilende_medlemmer/${fremskrivingsDato11}"
    },
    {
      "handling": "konkatiner_og_kopier_fra_arkiv_til_batch",
      "filnavn": "flettede_kontofoeringer",
      "batchFra": "pa_fak_ba_11",
      "batchTil": "pa_fak_ba_03",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "flette_feilende_medlemmer/${fremskrivingsDato12}"
    },
    {
      "handling": "pa_fak_ba_03",
      "modus": "reserveoppbygging",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "førsteKjøring": "${fremskrivingsDato11}",
      "andreKjøring": "${fremskrivingsDato12}",
      "bokføringsperiode": "${bokføringsperiode11}",
      "validerFeilendeMedlemmer": true
    },
    {
      "handling": "arkiver_batch_output",
      "filnavn": "reserveoppbygging",
      "batch": "pa_fak_ba_03",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "nøkkel": "reserveoppbygging/${bokføringsperiode11}",
      "komprimerOutput": true
    },
    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_03",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },


    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },
    {
      "handling": "kopier_fra_arkiv_til_batch",
      "filnavn": "reserveoppbygging",
      "batchFra": "pa_fak_ba_03",
      "batchTil": "pa_fak_ba_09",
      "grunnlagsdataMappeTil": "${grunnlagsdataMappe}",
      "nøkkel": "reserveoppbygging/${bokføringsperiode11}"
    },
    {
      "handling": "pa_fak_ba_09",
      "modus": "generer_reserveoppbygging_dataunderlag",
      "kjøringsId": "#{genererUUID}",
      "uttrekksdato": "${uttrekksdato12}",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "validerFeilendeMedlemmer": true
    },
    {
      "handling": "arkiver_batch_output",
      "filnavn": "reserveoppbygging_dataunderlag",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}",
      "nøkkel": "generer_reserveoppbygging_dataunderlag/${bokføringsperiode11}",
      "komprimerOutput": true
    },
    {
      "handling": "send_bare_filer_fra_batch_output_til_dvh",
      "filPrefix": "reserveoppbygging_dataunderlag",
      "batch": "pa_fak_ba_09",
      "filstiHosDVH": "/reserveoppbygging"
    },
    {
      "handling": "rydd_grunnlagsdata_for_batch",
      "batch": "pa_fak_ba_09",
      "grunnlagsdataMappe": "${grunnlagsdataMappe}"
    },







    {
      "handling": "opprett_filliste_og_triggerfil_hos_dvh",
      "filPrefix": "reserveoppbygging_dataunderlag",
      "filListe": "RESERVEOPPBYGGING_FILLISTE.txt",
      "filstiHosDVH": "/reserveoppbygging"
    }
  ]
}
